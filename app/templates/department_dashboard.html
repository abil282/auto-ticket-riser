<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1">
<title>{{ department }} Dashboard</title>
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body>
<nav class="navbar navbar-expand-lg navbar-dark bg-dark"><div class="container"><a class="navbar-brand" href="#">{{ department }} Admin</a><div class="ms-auto"><a class="btn btn-outline-light" href="/admin/logout">Logout</a></div></div></nav>
<div class="container my-4">
  <h3>{{ department }} - Tickets</h3>
  <div id="deptTickets"></div>
</div>
<script>
async function loadDept(){ try{ const res=await fetch(`/department/{{ department }}/api/tickets`); const j=await res.json(); const c=document.getElementById('deptTickets'); if(!j.tickets||j.tickets.length===0){ c.innerHTML='<div class="alert alert-info">No tickets for this department.</div>'; return;} c.innerHTML=j.tickets.map(t=>`<div class="card mb-3"><div class="card-body"><h5>#${t.ticket_id} - ${t.status}</h5><p>${t.corrected_description||t.original_description}</p><p><small>Assigned: ${t.assigned_to} | Priority: ${t.priority}</small></p></div></div>`).join(''); }catch(e){ console.error(e);} }
loadDept();
</script>
</body>
</html>